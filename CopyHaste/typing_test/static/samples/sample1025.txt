
sys.path.append('lib')
class CbmonitorClient(RestConnection):
	def __new__(self, hostname="127.0.0.1", port=80):
		return object.__new__(self, hostname, port)
	def __init__(self, hostname="127.0.0.1", port=80):
		self.username = ''
		self.password = ''
		self.baseUrl = 'http://%s:%s/' % (hostname, port)
	def post_results(self, build, testcase, env, metrics):
		if not build or not metrics:
			logging.error("invalid param build or metrics")
			return
		if not isinstance(metrics, dict):
			logging.error("param metrics must be dict type")
			return
		logging.info("posting metrics %s for build %s to litmus dashboard"
					 % (metrics, build))
		api = self.baseUrl + 'litmus/post/'
		params = [('build', build), ('testcase', testcase), ('env', env