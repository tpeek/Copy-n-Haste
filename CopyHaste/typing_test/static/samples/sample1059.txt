
def reset():
	sys.stdout.write('\x1b[0m')
	sys.stdout.flush()
atexit.register(reset)
STRIP_ANSI = re.compile(r'\x1b\[(\d+)(;\d+)?(;\d+)?[m|K]')
COLOR_ANSI = (
	(0x00, 0x00, 0x00), (0xcd, 0x00, 0x00),
	(0x00, 0xcd, 0x00), (0xcd, 0xcd, 0x00),
	(0x00, 0x00, 0xee), (0xcd, 0x00, 0xcd),
	(0x00, 0xcd, 0xcd), (0xe5, 0xe5, 0xe5),
	(0x7f, 0x7f, 0x7f), (0xff, 0x00, 0x00),
	(0x00, 0xff, 0x00), (0xff, 0xff, 0x00),
	(0x5c, 0x5c, 0xff), (0xff, 0x00, 0xff),
	(0x00, 0xff, 0xff), (0xff, 0xff, 0xff),
)
class LolCat(object):
	def __init__(self, mode=256, output=sys.stdout):
		self.mode = mode
		self.output = output
	def _distance(self, rgb1, rgb2):
		return sum(map(lambda c: (c[0] - c[1]) ** 2,
			zip(rgb1, rgb2)))
	def ansi(self, rgb):
		r, g, b = rgb
		if s