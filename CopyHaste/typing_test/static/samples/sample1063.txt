
LOG = logging.getLogger(__name__)
_LI = i18n._LI
class CacheManageFilter(wsgi.Middleware):
	def __init__(self, app):
		mapper = routes.Mapper()
		resource = cached_images.create_resource()
		mapper.connect("/v1/cached_images",
					   controller=resource,
					   action="get_cached_images",
					   conditions=dict(method=["GET"]))
		mapper.connect("/v1/cached_images/{image_id}",
					   controller=resource,
					   action="delete_cached_image",
					   conditions=dict(method=["DELETE"]))
		mapper.connect("/v1/cached_images",
					   controller=resource,
					   action="delete_cached_images",
					   conditions=dict(method=["DELETE"]))
		mapper.connect("/v1/queued_images/{image_id}",
					   controller=resource,
					   action="queue_image"