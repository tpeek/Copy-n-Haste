
class API(wsgi.Router):
	def __init__(self, mapper):
		custom_image_properties = images.load_custom_properties()
		reject_method_resource = wsgi.Resource(wsgi.RejectMethodController())
		schemas_resource = schemas.create_resource(custom_image_properties)
		mapper.connect('/schemas/image',
					   controller=schemas_resource,
					   action='image',
					   conditions={'method': ['GET']})
		mapper.connect('/schemas/image',
					   controller=reject_method_resource,
					   action='reject',
					   allowed_methods='GET',
					   conditions={'method': ['POST', 'PUT', 'DELETE',
											  'PATCH', 'HEAD']})
		mapper.connect('/schemas/images',
					   controller=schemas_resource,
					   action='images',
					   conditions={'method': ['GET']}