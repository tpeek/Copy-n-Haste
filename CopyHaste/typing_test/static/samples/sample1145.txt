
rec_state=0
def enable_recognition(state):
	global rec_state
	rec_state=1
	return []
def disable_recognition(state):
	global rec_state
	rec_state=0
	return []
def callback(recognizer, audio):
	global rec_state
	try:
		if rec_state==1:
			message = speech()
			result = recognizer.recognize(audio, True)
			message.text=str(result[0]['text'])
			message.confidence=result[0]['confidence']
			message.interface_id=1
			pub.publish(message)
			rospy.loginfo(result) 
		else:
			print('Recognition disabled')
	except LookupError as e:
		rospy.loginfo("Could not understand sentence!") 
if __name__ == '__main__':
	rospy.init_node('recognition')
	pub = rospy.Publisher('speech', speech)
	s_en = rospy.Service('enable_recognition', Empty, enable_recogniti