
class MacroToEdit(ValueError): pass
ipython_input_pat = re.compile(r"<ipython\-input\-(\d+)-[a-z\d]+>$")
range_re = re.compile(r, re.VERBOSE)
def extract_code_ranges(ranges_str):
	for range_str in ranges_str.split():
		rmatch = range_re.match(range_str)
		if not rmatch:
			continue
		sep = rmatch.group("sep")
		start = rmatch.group("start")
		end = rmatch.group("end")
		if sep == '-':
			start = int(start) - 1 if start else None
			end = int(end) if end else None
		elif sep == ':':
			start = int(start) - 1 if start else None
			end = int(end) - 1 if end else None
		else:
			end = int(start)
			start = int(start) - 1
		yield (start, end)
@skip_doctest
def extract_symbols(code, symbols):
	symbols = symbols.split(',')
	py_code = ast.parse(co