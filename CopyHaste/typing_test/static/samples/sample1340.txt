
tds_url = 'http://thredds.ucar.edu/thredds/idd/obsData.xml'
waf_dir = '/var/www/htdocs/WAF'
nciso_num = '1'
def new_name(fn, part_rm_cnt):
  dn =  os.path.dirname(fn)
  bn = os.path.basename(fn)
  bn = bn.replace(".ncml", '')
  parts = bn.split('_')
  if parts[0] != 'thredds':
	sys.stderr.write("Already renamed: " + fn + "\n")
	return fn
  for _ in range(part_rm_cnt):
	parts.pop(0)
  new_name = dn + '/' +  "_".join( parts )
  return new_name
parser = argparse.ArgumentParser()
parser.add_argument("waf_dir", nargs="?", help="Output WAF directory. Default: " + waf_dir, default=waf_dir)
parser.add_argument("tds_url", nargs="?", help="THREDDS url to parse. Default: " + tds_url, default=tds_url)
parser.add_argument("-r", "--rename", action="stor