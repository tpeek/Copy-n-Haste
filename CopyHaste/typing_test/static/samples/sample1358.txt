
class NotebookDirective(Directive):
	required_arguments = 1
	optional_arguments = 1
	option_spec = {'skip_exceptions' : directives.flag}
	final_argument_whitespace = True
	def run(self):
		nb_path = self.arguments[0]
		if ' ' in nb_path: raise ValueError(
			"Due to issues with docutils stripping spaces
			"space is not allowed in notebook filenames '{0}'".format(nb_path))
		if not self.state.document.settings.raw_enabled:
			raise self.warning('"%s" directive disabled.' % self.name)
		source_dir = os.path.dirname(
			os.path.abspath(self.state.document.current_source))
		nb_filename = self.arguments[0]
		nb_basename = os.path.basename(nb_filename)
		rst_file = self.state_machine.document.attributes['source']
		rst_dir = os.path.abspath(os