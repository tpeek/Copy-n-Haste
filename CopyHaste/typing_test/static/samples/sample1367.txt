
TESTS = 0
FAILS = 0
def served_by_nginx(url):
	r = requests.get(url, allow_redirects=False)
	status = (r.status_code == 200)
	nginx = ('x-served' in r.headers and r.headers['x-served'] == 'Nginx')
	return all([status, nginx])
def served_by_django(url):
	r = requests.get(url, allow_redirects=False)
	status = (r.status_code == 200)
	django = ('x-served' not in r.headers or r.headers['x-served'] == 'nginx-via-django')
	return all([status, django])
def served_by_perl(url):
	r = requests.get(url, allow_redirects=False)
	status = (r.status_code == 302)
	perl = ('x-perl-redirect' in r.headers and r.headers['x-perl-redirect'] == 'True')
	return all([status, perl])
def served(url):
	r = requests.get(url, allow_redirects=False)
	return r.status_code