
def updateCache(dictionary,fileRef,limit,expectDict = True):
	loadedLength = length1 = len(dictionary.keys())
	pickleExists = path.isfile(fileRef)
	badDict = badPickle = False
	if expectDict and type(dictionary) is not dict:
		print "Error, expected dictionary [out], type is", type(dictionary)
		dictionary = dict()
		badDict = True
	if pickleExists:
		pickleLoaded = loadWhenReady(fileRef,dictionary)
		if expectDict and type(pickleLoaded) is not dict:
			badPickle = True
			print "Error, expected dictionary [in], type is", type(pickleLoaded)
		if badDict and badPickle:
			print "Double error, setting dictionary to empty"
		elif badDict:
			dictionary.update(pickleLoaded)
		elif badPickle:
			needsWrite = True
		else:
			length1 = len(pickle