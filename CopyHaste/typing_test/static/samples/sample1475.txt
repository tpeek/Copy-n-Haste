
socket.setdefaulttimeout(30)
	
class Upnp:
	def log(self, msg, level = xbmc.LOGDEBUG):
		log('Upnp: ' + msg, level)
	
	def logDebug(self, msg, level = xbmc.LOGDEBUG):
		if DEBUG == 'true':
			log('Upnp: ' + msg, level)
			
			
	def SendExtJson(self, IPP, params):
		self.log('SendExtJson')
		try:
			xbmc_host = str(IPP.split(":")[0])
			xbmc_port = int(IPP.split(":")[1])
			s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
			s.connect((xbmc_host, xbmc_port))
			params2 = copy.copy(params)
			params2["jsonrpc"] = "2.0"
			params2["id"] = 1
			s.send(json.dumps(params2))
			s.shutdown(socket.SHUT_RDWR)
			s.close()
		except:
			if NOTIFY == True:
				xbmc.executebuiltin("Notification( %s, %s, %d, %s)" % ("PseudoTV Live", xbmc_host + " Fa