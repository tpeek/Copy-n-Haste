
if sys.version_info < (2, 7):
else:
API_URL = 'http://www.thetvdb.com/api/%s/series/%s/banners.xml'
class TVDB(object):
	def __init__(self):
		self.name = 'TVDB'
		self.api_key = TVDB_API_KEY
		self.baseurl = 'http://thetvdb.com'
		self.url_prefix = 'http://www.thetvdb.com/banners/'
	
	
	def _buildUrl(self, cmd, parms={}):
		url = '%s/api/%s?%s' % (self.baseurl, cmd, urllib.urlencode(parms))
		return url
		
	def getIdByZap2it(self, zap2it_id):
		log("tvdb: getIdByZap2it")
		try:
			response = read_url_cached(self._buildUrl('GetSeriesByRemoteID.php', {'zap2it' : zap2it_id}))
			tvdbidRE = re.compile('<id>(.+?)</id>', re.DOTALL)
			match = tvdbidRE.search(response)
			if match:
				return match.group(1)
			else:
				return 0
		except Excepti