
def parse_index(index_file):
	ports_list = {}
	cmd = "bzip2 -dc " + index_file
	p1 = Popen(cmd, shell=True, stdin=PIPE, stdout=PIPE)
	line=p1.stdout.readline()
	while line != "":
		(portname, port, junk) = line.split('|', 2)
		port = re.sub("/usr/ports/", "", port)
		ports_list[port] = portname 
		line=p1.stdout.readline()
	return ports_list
def parse_ports_txt(ports_file, ports_list):
	ports_to_install = [] 
	f = open(ports_file, "r")
	line = f.readline()
	while line != "":
		line = line.rstrip()
		if ports_list.has_key(line):
			ports_to_install.append(ports_list[line])
		line = f.readline()
	f.close()  
	return ports_to_install
def install_ports(ports_to_install, chroot):
	os.system("mkdir -p %s/dev" % chroot)
	os.system("mount -t devfs