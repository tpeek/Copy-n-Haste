

class Generator:
	def __init__( self ):
		self._generate_addons_file()
		self._generate_md5_file()
		
	def _generate_addons_file( self ):
		addons = os.listdir( "." )
		addons_xml = u"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<addons>\n"
		for addon in addons:
			try:
				if ( not os.path.isdir( addon ) or addon == ".svn" ): continue
				_path = os.path.join( addon, "addon.xml" )
				xml_lines = open( _path, "r" ).read().splitlines()
				addon_xml = ""
				for line in xml_lines:
					if ( line.find( "<?xml" ) >= 0 ): continue
					addon_xml += unicode( line.rstrip() + "\n", "utf-8" )
				addons_xml += addon_xml.rstrip() + "\n\n"
			except Exception, e:
				print "Excluding %s for %s" % ( _path, e, )
		addons_xml = addons_xml.stri