
error_logo=os.path.join(common.addon_path,'resources','images','redx.png')
net=Net()
USER_AGENT='Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:30.0) Gecko/20100101 Firefox/30.0'
class AllmyvideosResolver(Plugin,UrlResolver,PluginSettings):
	implements=[UrlResolver,PluginSettings]
	name="allmyvideos"
	domains=[ "allmyvideos.net" ]
	def __init__(self):
		p=self.get_setting('priority') or 100
		self.priority=int(p)
		self.net=Net()
	def get_media_url(self,host,media_id):
		try:
			url=self.get_url1st(host,media_id)
			headers={'User-Agent':USER_AGENT,'Referer':url}
			html=self.net.http_GET(url,headers=headers).content
			stream_url = self.__get_best_source(html) 
			if stream_url:
				xbmc.sleep(2000)
				return stream_url
			
			url=self.get_url