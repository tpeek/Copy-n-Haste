
class bayfilesResolver(Plugin, UrlResolver, PluginSettings):
	implements = [UrlResolver, PluginSettings]
	name = "bayfiles"
	domains = [ "bayfiles.com" ]
	def __init__(self):
		p = self.get_setting('priority') or 100
		self.priority = int(p)
		self.net = Net()
								
	def get_media_url(self, host, media_id):
		try:
			web_url = self.get_url(host, media_id)
			html=self.net.http_GET(web_url).content
			found = re.search(r'var vfid = (\d+);\s*var delay = (\d+);', html)
			vfid, delay = found.groups()
			response = json.loads(self.net.http_POST('http://bayfiles.com/ajax_download',{"_": wait() * 1000,"action": "startTimer","vfid": vfid}).content)
			common.addon.show_countdown(int(delay),'[B][COLOR orange]BAYFILES[/COLOR][/B]','')
			html = 