
cookie_file = os.path.join(common.profile_path, 'bu.cookies')
net = Net(cookie_file)
MAX_TRIES = 3
class billionuploads(Plugin, UrlResolver, PluginSettings):
	implements = [UrlResolver, PluginSettings]
	name = "billionuploads"
	domains = [ "billionuploads.com" ]
	def __init__(self):
		p = self.get_setting('priority') or 100
		self.priority = int(p)
	def get_media_url(self, host, media_id):
		try:
			web_url = self.get_url(host, media_id)
			headers = {
					   'Host': 'billionuploads.com'
					}
			
			tries = 0
			while tries < MAX_TRIES:
				html = net.http_GET(web_url, headers=headers).content
			
				match=re.search('var\s+b\s*=\s*"([^"]+)', html)
				if match:
					html = self.__incapsala_decode(match.group(1))
					match = re.search(