
class crunchyrollResolver(Plugin, UrlResolver, PluginSettings):
	implements = [UrlResolver, PluginSettings]
	name = "crunchyroll"
	domains = [ "crunchyroll.com" ]
	def __init__(self):
		p = self.get_setting('priority') or 100
		self.priority = int(p)
		self.net = Net()
	def get_media_url(self, host, media_id):
		web_url = self.get_url(host, media_id)
		try:
			html=self.net.http_GET('http://www.crunchyroll.com/android_rpc/?req=RpcApiAndroid_GetVideoWithAcl&media_id=%s'%media_id,{'Host':'www.crunchyroll.com',
				 'X-Device-Uniqueidentifier':'ffffffff-931d-1f73-ffff-ffffaf02fc5f',
				 'X-Device-Manufacturer':'HTC',
				 'X-Device-Model':'HTC Desire',
				 'X-Application-Name':'com.crunchyroll.crunchyroid',
				 'X-Device-Product':'htc_brav