
logo=os.path.join(common.addon_path, 'resources', 'images', 'redx.png')
class DailymotionResolver(Plugin, UrlResolver, PluginSettings):
	implements = [UrlResolver, PluginSettings]
	name = "dailymotion"
	domains = [ "dailymotion.com" ]
	def __init__(self):
		p = self.get_setting('priority') or 100
		self.priority = int(p)
		self.net = Net()
	def get_media_url(self, host, media_id):
		try:
			web_url = self.get_url(host, media_id)
			link = self.net.http_GET(web_url).content			
			if link.find('"error":') >= 0:
				err_title = re.compile('"title":"(.+?)"').findall(link)[0]				
				if not err_title:
					err_title = 'Content not available.'
				
				err_message = re.compile('"message":"(.+?)"').findall(link)[0]
				if not err_message:
					er