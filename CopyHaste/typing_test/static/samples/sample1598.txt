
net = Net()
class DonevideoResolver(Plugin, UrlResolver, PluginSettings):
	implements = [UrlResolver, PluginSettings]
	name = "donevideo"
	domains = [ "donevideo.com" ]
	def __init__(self):
		p = self.get_setting('priority') or 100
		self.priority = int(p)
		self.net = Net()
	def get_media_url(self, host, media_id):
		try:
			url = self.get_url(host, media_id)
			html = self.net.http_GET(url).content
			dialog = xbmcgui.DialogProgress()
			dialog.create('Resolving', 'Resolving Donevideo Link...')	   
			dialog.update(0)
			data = {}
			r = re.findall(r'type="(?:hidden|submit)?" name="(.+?)"\s* value="?(.+?)">', html)
			for name, value in r:
				data[name] = value
				
			html = net.http_POST(url, data).content
			r = re.findall(r'type="hi