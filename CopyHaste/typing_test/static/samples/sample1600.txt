
class ExashareResolver(Plugin,UrlResolver,PluginSettings):
	implements=[UrlResolver,SiteAuth,PluginSettings]
	name="exashare"
	domains = [ "exashare.com" ]
	
	profile_path=common.profile_path	
	cookie_file=os.path.join(profile_path,'%s.cookies'%name)
	USER_AGENT='Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:30.0) Gecko/20100101 Firefox/30.0'
	
	def __init__(self):
		p=self.get_setting('priority') or 100
		self.priority=int(p)
		self.net=Net()
	def get_media_url(self,host,media_id):
		base_url='http://www.'+host+'.com/'+media_id
		headers={'User-Agent':self.USER_AGENT,'Referer':'http://www.'+host+'.com/'}
		try:
			try: html=self.net.http_GET(base_url).content
			except: html=self.net.http_GET(base_url,headers=headers).content
			stream_url=re.