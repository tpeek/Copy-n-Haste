
class Action(Bcfg2.Client.Tools.Tool):
	name = 'Action'
	__handles__ = [('Action', None)]
	__req__ = {'Action': ['name', 'timing', 'when', 'command', 'status']}
	def RunAction(self, entry):
		shell = False
		shell_string = ''
		if entry.get('shell', 'false') == 'true':
			shell = True
			shell_string = '(in shell) '
		if not Bcfg2.Options.setup.dry_run:
			if Bcfg2.Options.setup.interactive:
				prompt = ('Run Action %s%s, %s: (y/N): ' %
						  (shell_string, entry.get('name'),
						   entry.get('command')))
				ans = safe_input(prompt)
				if ans not in ['y', 'Y']:
					return False
			if Bcfg2.Options.setup.service_mode == 'build':
				if entry.get('build', 'true') == 'false':
					self.logger.debug("Action: Deferring execution of %s d