
class Encap(Bcfg2.Client.Tools.PkgTool):
	name = 'Encap'
	__execs__ = ['/usr/local/bin/epkg']
	__handles__ = [('Package', 'encap')]
	__req__ = {'Package': ['version', 'url']}
	pkgtype = 'encap'
	pkgtool = ("/usr/local/bin/epkg -l -f -q %s", ("%s", ["url"]))
	splitter = re.compile(r'.*/(?P<name>[\w-]+)\-(?P<version>[\w\.+-]+)')
	def RefreshPackages(self):
		self.installed = {}
		for pkg in glob.glob("/usr/local/encap/*"):
			match = self.splitter.match(pkg)
			if match:
				self.installed[match.group('name')] = match.group('version')
			else:
				print("Failed to split name %s" % pkg)
		self.logger.debug("Encap: RefreshPackages: self.installed.keys() are:")
		self.logger.debug("%s" % list(self.installed.keys()))
	def VerifyPackage(self, ent