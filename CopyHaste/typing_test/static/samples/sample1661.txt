
class MacPorts(Bcfg2.Client.Tools.PkgTool):
	name = 'MacPorts'
	__execs__ = ["/opt/local/bin/port"]
	__handles__ = [('Package', 'macport')]
	__req__ = {'Package': ['name', 'version']}
	pkgtype = 'macport'
	pkgtool = ('/opt/local/bin/port install %s', ('%s', ['name']))
	def RefreshPackages(self):
		pkgcache = self.cmd.run(["/opt/local/bin/port",
								 "installed"]).stdout.splitlines()
		self.installed = {}
		for pkg in pkgcache:
			if pkg.startswith("Warning:"):
				continue
			if pkg.startswith("The following ports are currently installed"):
				continue
			if pkg.startswith("No ports are installed"):
				return
			pkgname = pkg.split('@')[0].strip()
			version = pkg.split('@')[1].split(' ')[0]
			self.logger.info(" pkgname: %s version: