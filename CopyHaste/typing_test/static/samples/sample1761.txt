
waagent.LoggerInit('/tmp/test.log','/dev/stdout')
waagent.MyDistro = waagent.GetMyDistro()
class Dummy(object):
	pass
hutil = Dummy()
hutil.log = waagent.Log
class TestResetSshdConfig(unittest.TestCase):
	def test_reset_sshd_config(self):
		path = '/tmp/sshd_config'
		resources=os.path.join(env.root, 'resources')
		if(os.path.exists(path)):
			os.remove(path)
		if(os.path.isdir('resources')):
			shutil.rmtree('resources')
		shutil.copytree(resources, 'resources')
		vmaccess._reset_sshd_config(path)
		self.assertTrue(os.path.exists(path))
		config = waagent.GetFileContents(path)
		self.assertFalse(config.startswith("
		os.remove(path)
	def test_backup_sshd_config(self):
		test_dir = '/tmp/test_vmaccess'
		path = os.path.join(test_dir, "old_