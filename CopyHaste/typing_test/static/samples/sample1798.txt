
def write_svg(filename,root_node):
	nodes = []
	edges = []
	_collect_dot_graph(root_node,nodes,edges)
	g = pydot.Dot(splines="ortho")
	g_nodes = [pydot.Node(name=node.__class__.__name__,
						  shape="box") 
			   for node in nodes]
	for n in g_nodes:
		g.add_node(n)
	for tail,head in edges:
		g_tail = g_nodes[nodes.index(tail.node)]
		g_head = g_nodes[nodes.index(head.node)]
		g.add_edge(pydot.Edge(g_tail,g_head,
							  taillabel=tail.name,
							  headlabel=head.name,
							  sametail=tail.name,
							  samehead=head.name,
							  fontname="courier",
							  fontsize=10,
							  arrowsize=0.4,
							  dir="both",
							  arrowtail="box",
							  arrowhead="obox"))
	g.write_svg(filename)
def _collect_dot_graph(node,nodes,edges