
sys.path.append("..")
__all__ = ["UserProfileManager"]
class UserProfileManager(Component):
	def get_user_profile(self, user_id):
		return self.db.find_first_object_by(UserProfile, user_id=user_id)
	def create_user_profile(self, args):
		self.log.debug("create_user_profile: %r" % args)
		try:
			exist = self.get_user_profile(g.user.id)
			if not exist:
				return self.db.add_object_kwargs(UserProfile, **args).dic()
			else:
				return self.update_user_profile(args)
		except Exception as e:
			self.log.debug(e)
			return internal_server_error("failed to create user profile")
	def update_user_profile(self, args):
		self.log.debug("update_user_profile")
		try:
			u_id = args["user_id"]
			user_profile = self.db.find_first_object_by(UserProfil