
valid_strings = set(ascii_lowercase) | set(str(x) for x in xrange(10)) | set([' '])
paren_expression = re.compile('\s*\([^)]*\)\s*')
brackets = re.compile(r'\[[^)]*\]')
def normalize(text):
		text = brackets.sub("", text)
		text = paren_expression.sub(" ", text)
		text = unidecode(text).lower()
		text = text.replace("{", "").replace("~", "").replace("}", "")
		" ".join(x for x in text.split())
		return ''.join(x for x in text if x in valid_strings)
class TitleFinder:
	def __init__(self, index):
		print("Loading big index ...")
		temp_index = pickle.load(index)
		print("done")
		self._index = defaultdict(set)
		print("Creating smaller index ...")
		for title in temp_index:
			for word in normalize(title).split():
				self._index[word].add(t