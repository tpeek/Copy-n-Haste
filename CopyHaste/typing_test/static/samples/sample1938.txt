
kSUM_FIELDS = ["sent", "weight", "vw", "token",
			   "val", "type"]
class ResultCombiner:
	def __init__(self):
		self._total = 0
		self._right = defaultdict(int)
		self._wrong = defaultdict(int)
		self._hopeless = defaultdict(int)
		self._premature = defaultdict(int)
		self._late = defaultdict(int)
	def write(self, vw, weight):
		positions = set(self._right) | set(self._wrong) | set(self._hopeless)
		print("*", positions)
		d = {}
		d["weight"] = weight
		d["vw"] = vw
		total_right = 0
		total_wrong = 0
		total_hopeless = 0
		total_premature = 0
		total_late = 0
		for ss, tt in sorted(positions):
			total_right += self._right[(ss, tt)]
			total_wrong += self._wrong[(ss, tt)]
			total_hopeless += self._hopeless[(ss, tt)]
			total_premature