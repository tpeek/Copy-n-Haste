
__version__ = "0.4"
MAGIC = "\212ARG\r\n\032\n"
class ArgStream(ChunkStream):
	"Parser callbacks for ARG data"
	def __init__(self, fp):
		ChunkStream.__init__(self, fp)
		self.eof = 0
		self.im = None
		self.palette = None
		self.__reset()
	def __reset(self):
		self.count = 0
		self.id = None
		self.action = ("NONE",)
		self.images = {}
		self.names = {}
	def chunk_AHDR(self, offset, bytes):
		"AHDR -- animation header"
		if self.count != 0:
			raise SyntaxError, "misplaced AHDR chunk"
		s = self.fp.read(bytes)
		self.size = i32(s), i32(s[4:])
		try:
			self.mode, self.rawmode = _MODES[(ord(s[8]), ord(s[9]))]
		except:
			raise SyntaxError, "unknown ARG mode"
		if Image.DEBUG:
			print "AHDR size", self.size
			print "AHDR mode", self.mode