
GITHUB_OAUTH_TOKEN = "{{ github_oauth_token }}"
USAGE = "Usage: {0} ORG REPO SHA STATUS TARGET_URL DESCRIPTION CONTEXT"
VALID_STATUS_LIST = ['pending', 'success', 'error', 'failure']
def parse_args(arg_list):
	if len(arg_list) != 8:
		print USAGE.format(arg_list[0])
		exit(1)
	status = arg_list[4]
	if not status in VALID_STATUS_LIST:
		print "Invalid status: must be one of {0}".format(", ".join(VALID_STATUS_LIST))
		exit(1)
	return {
		'org': arg_list[1],
		'repo': arg_list[2],
		'sha': arg_list[3],
		'status': arg_list[4],
		'target_url': arg_list[5],
		'description': arg_list[6],
		'context': arg_list[7],
	}
def post_status(org, repo, sha, status, target_url, description, context):
	url = "https://api.github.com/repos/{0}/{1}/statuses/{2