
DB_PLUGIN_KLASS = 'neutron.db.db_base_plugin_v2.NeutronDbPluginV2'
class TestQosPlugin(base.BaseQosTestCase):
	def setUp(self):
		super(TestQosPlugin, self).setUp()
		self.setup_coreplugin()
		mock.patch('neutron.db.api.create_object').start()
		mock.patch('neutron.db.api.update_object').start()
		mock.patch('neutron.db.api.delete_object').start()
		mock.patch('neutron.db.api.get_object').start()
		mock.patch(
			'neutron.objects.qos.policy.QosPolicy.obj_load_attr').start()
		cfg.CONF.set_override("core_plugin", DB_PLUGIN_KLASS)
		cfg.CONF.set_override("service_plugins", ["qos"])
		mgr = manager.NeutronManager.get_instance()
		self.qos_plugin = mgr.get_service_plugins().get(
			constants.QOS)
		self.qos_plugin.notification_driver_manager =