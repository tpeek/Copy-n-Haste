
try:
except ImportError:
__author__ = 'Brian Quinlan (brian@sweetapp.com)'
_threads_queues = weakref.WeakKeyDictionary()
_shutdown = False
def _python_exit():
	global _shutdown
	_shutdown = True
	items = list(_threads_queues.items())
	for t, q in items:
		q.put(None)
	for t, q in items:
		t.join()
EXTRA_QUEUED_CALLS = 1
class _WorkItem(object):
	def __init__(self, future, fn, args, kwargs):
		self.future = future
		self.fn = fn
		self.args = args
		self.kwargs = kwargs
class _ResultItem(object):
	def __init__(self, work_id, exception=None, result=None):
		self.work_id = work_id
		self.exception = exception
		self.result = result
class _CallItem(object):
	def __init__(self, work_id, fn, args, kwargs):
		self.work_id = work_id
		self.fn = fn