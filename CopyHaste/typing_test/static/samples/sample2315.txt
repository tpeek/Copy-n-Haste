
						print_function)
__license__ = 'GPL v3'
__copyright__ = '2014, Kovid Goyal <kovid at kovidgoyal.net>'
del upper
SPHINX_BUILD = 'sphinx-build2'
j, d, a = os.path.join, os.path.dirname, os.path.abspath
def sphinx_build(language, base, builder='html', bdir='html', t=None, quiet=True):
	destdir = j(base, bdir)
	if not os.path.exists(destdir):
		os.makedirs(destdir)
	ans = [SPHINX_BUILD, '-D', ('language=' + language), '-b', builder]
	if quiet:
		ans.append('-q')
	if builder == 'html':
		ans += ['-w', j(destdir, 'sphinx-build-warnings.txt')]
	if t:
		ans += ['-t', t]
	ans += ['-d', j(base, 'doctrees'), '.', destdir]
	print(' '.join(ans))
	subprocess.check_call(ans)
	return destdir
def build_manual(language, base):
	sb = partial(sphinx_buil