
DAY = 24 * 60 * 60 * 1000
def lcm(a,b):
	n = a*b
	while b:
		a, b = b, a % b
	return n / a
class CapSimulator(object):
	def __init__(self):
		self.capacitorCapacity = 100
		self.capacitorRecharge = 1000
		self.t_max = DAY
		self.reload = False
		self.stagger = False
		self.scale = False
		self.scale_resolutions = (100, 50, 25, 10)
		self.stability_precision = 1
	def scale_activation(self, duration, capNeed):
		for res in self.scale_resolutions:
			mod = duration % res
			if mod:
				if mod > res/2.0:
					mod = res-mod
				else:
					mod = -mod
				if abs(mod) <= duration/100.0:
					duration += mod
					capNeed += float(mod)/duration * capNeed
					break
		return duration, capNeed
	def init(self, modules):
		mods = {}
		for module in modu