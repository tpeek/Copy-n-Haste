
								   PythonTracebackLexer)
line_re = re.compile('.*?\n')
class IPythonConsoleLexer(Lexer):
	
	name = 'IPython console session'
	aliases = ['ipython']
	mimetypes = ['text/x-ipython-console']
	input_prompt = re.compile("(In \[[0-9]+\]: )|(   \.\.\.+:)")
	output_prompt = re.compile("(Out\[[0-9]+\]: )|(   \.\.\.+:)")
	continue_prompt = re.compile("   \.\.\.+:")
	tb_start = re.compile("\-+")
	def get_tokens_unprocessed(self, text):
		pylexer = PythonLexer(**self.options)
		tblexer = PythonTracebackLexer(**self.options)
		curcode = ''
		insertions = []
		for match in line_re.finditer(text):
			line = match.group()
			input_prompt = self.input_prompt.match(line)
			continue_prompt = self.continue_prompt.match(line.rstrip())
			output_prompt