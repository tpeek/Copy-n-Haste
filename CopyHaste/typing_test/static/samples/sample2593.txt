
def service_ctrl(
				 command,
				 port,
				 trans_factory = None,
				 prot_factory = None):
	if command in ["status"]:
		try:
			status = fb303_wrapper('status', port, trans_factory, prot_factory)
			status_details = fb303_wrapper('get_status_details', port, trans_factory, prot_factory)
			msg = fb_status_string(status)
			if (len(status_details)):
				msg += " - %s" % status_details
			print msg
			if (status == fb_status.ALIVE):
				return 2
			else:
				return 3
		except:
			print "Failed to get status"
			return 3
	if command in ["version","alive","name"]:
		try:
			result = fb303_wrapper(command,  port, trans_factory, prot_factory)
			print result
			return 0
		except:
			print "failed to get ",command
			return 3
	if command in 