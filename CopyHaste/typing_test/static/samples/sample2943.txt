sys.path.append( '../pymod' )
def bsb_0():
	try:
		gdaltest.bsb_dr = gdal.GetDriverByName( 'BSB' )
	except:
		gdaltest.bsb_dr = None
	if gdaltest.bsb_dr is None:
		return 'skip'
	return 'success'
def bsb_1():
	if gdaltest.bsb_dr is None:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall.kap', 1, 30321 )
	return tst.testOpen()
def bsb_2():
	if gdaltest.bsb_dr is None:
		return 'skip'
	md = gdaltest.bsb_dr.GetMetadata()
	if 'DMD_CREATIONDATATYPES' not in md:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall.kap', 1, 30321 )
	return tst.testCreateCopy()
def bsb_3():
	if gdaltest.bsb_dr is None:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall_index.kap', 1, 30321 )
	return tst.testOpen()
def bsb_4():
	if gdaltest.bsb_dr is None:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall_with_line_break.kap', 1, 30321 )
	return tst.testOpen()
def bsb_5():
	if gdaltest.bsb_dr is None:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall_truncated.kap', 1, 29696 )
	gdal.PushErrorHandler('CPLQuietErrorHandler')
	ret = tst.testOpen()
	gdal.PopErrorHandler()
	return ret
def bsb_6():
	if gdaltest.bsb_dr is None:
		return 'skip'
	tst = gdaltest.GDALTest( 'BSB', 'rgbsmall_truncated2.kap', 1, 29696 )
	gdal.PushErrorHandler('CPLQuietErrorHandler')
	ret = tst.testOpen()
	gdal.PopErrorHandler()
	return ret
gdaltest_list = [
	bsb_0,
	bsb_1,
	bsb_2,
	bsb_3,
	bsb_4,
	bsb_5,
	bsb_6
	]
if __name__ == '__main__':
	gdaltest.setup_run( 'BSB' )
	gdaltest.run_tests( gdaltest_list )
	gdaltest.summarize()