
versions_opts = [
	cfg.StrOpt('public_endpoint', default=None,
			   help="Public url to use for versions endpoint. The default "
					"is None, which will use the request's host_url "
					"attribute to populate the URL base. If Cinder is "
					"operating behind a proxy, you will want to change "
					"this to represent the proxy's URL."),
]
CONF = cfg.CONF
CONF.register_opts(versions_opts)
def get_view_builder(req):
	base_url = CONF.public_endpoint or req.application_url
	return ViewBuilder(base_url)
class ViewBuilder(object):
	def __init__(self, base_url):
		self.base_url = base_url
	def build_choices(self, VERSIONS, req):
		version_objs = []
		for version in VERSIONS:
			version = VERSIONS[version]
			version_objs.append({
				"id": v