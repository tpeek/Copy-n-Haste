
class TestNodeStates(base.BaseBaremetalTest):
	@classmethod
	def resource_setup(cls):
		super(TestNodeStates, cls).resource_setup()
		_, cls.chassis = cls.create_chassis()
		_, cls.node = cls.create_node(cls.chassis['uuid'])
	def _validate_power_state(self, node_uuid, power_state):
		if power_state == 'rebooting':
			power_state = 'power on'
		start = timeutils.utcnow()
		while timeutils.delta_seconds(
				start, timeutils.utcnow()) < self.power_timeout:
			_, node = self.client.show_node(node_uuid)
			if node['power_state'] == power_state:
				return
		message = ('Failed to set power state within '
				   'the required time: %s sec.' % self.power_timeout)
		raise exceptions.TimeoutException(message)
	@test.idempotent_id('cd8afa5e-3f57-4e4