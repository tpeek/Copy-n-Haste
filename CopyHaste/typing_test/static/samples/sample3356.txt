permission_queryset = None
@receiver(pre_delete, sender=ContentType)
def fix_permission_content_type_pre(sender, instance, **kwargs):
	if instance.name == 'pootle' and instance.model == "":
		logging.debug("Fixing permissions content types")
		global permission_queryset
		permission_queryset = [permission for permission in \
							   Permission.objects.filter(content_type=instance)]
@receiver(post_delete, sender=ContentType)
def fix_permission_content_type_post(sender, instance, **kwargs):
	global permission_queryset
	if permission_queryset is not None:
		dir_content_type = ContentType.objects.get(app_label='pootle_app',
												   model='directory')
		dir_content_type.name = 'pootle'
		dir_content_type.save()
		for permission in permission_queryset:
			permission.content_type = dir_content_type
			permission.save()
		permission_queryset = None