def print_bool(val):
	sys.stdout.write('1' if val else '0')
def print_int(val):
	sys.stdout.write(str(val))
	sys.stdout.write(',')
def print_string(str):
	print_int(len(unicode(str)))
	sys.stdout.write(str)
def print_ast(node):
	id = node[0]
	if not isinstance(node[1], types.StringType):
		print_bool(True)
		print_string(symbol.sym_name[id])
		print_string(str(id))
		for item in node[1:]:
			if isinstance(item, types.TupleType):
				print_bool(True)
				print_ast(item)
		print_bool(False)
	else:
		print_bool(False)
		print_string(token.tok_name[id])
		print_string(str(id))
		print_string(node[1])
reload(sys)
sys.setdefaultencoding('utf_8')
if sys.platform == "win32":
	msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)
ast = suite(sys.stdin.read())
print_string('WithRuleId')
print_ast(ast2tuple(ast))
sys.stdout.flush()