__version__ = "0.2"
MAGIC = 0x3ADE68B1
i32 = _binary.i32le
def _accept(prefix):
	return len(prefix) >= 4 and i32(prefix) == MAGIC
class DcxImageFile(PcxImageFile):
	format = "DCX"
	format_description = "Intel DCX"
	def _open(self):
		s = self.fp.read(4)
		if i32(s) != MAGIC:
			raise SyntaxError("not a DCX file")
		self._offset = []
		for i in range(1024):
			offset = i32(self.fp.read(4))
			if not offset:
				break
			self._offset.append(offset)
		self.__fp = self.fp
		self.seek(0)
	@property
	def n_frames(self):
		return len(self._offset)
	@property
	def is_animated(self):
		return len(self._offset) > 1
	def seek(self, frame):
		if frame >= len(self._offset):
			raise EOFError("attempt to seek outside DCX directory")
		self.frame = frame
