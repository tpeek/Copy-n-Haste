__version__ = "0.9"
i8 = _binary.i8
i16 = _binary.i16le
o8 = _binary.o8
o16 = _binary.o16le
def _accept(prefix):
	return prefix[:6] in [b"GIF87a", b"GIF89a"]
class GifImageFile(ImageFile.ImageFile):
	format = "GIF"
	format_description = "Compuserve GIF"
	global_palette = None
	def data(self):
		s = self.fp.read(1)
		if s and i8(s):
			return self.fp.read(i8(s))
		return None
	def _open(self):
		s = self.fp.read(13)
		if s[:6] not in [b"GIF87a", b"GIF89a"]:
			raise SyntaxError("not a GIF file")
		self.info["version"] = s[:6]
		self.size = i16(s[6:]), i16(s[8:])
		self.tile = []
		flags = i8(s[10])
		bits = (flags & 7) + 1
		if flags & 128:
			self.info["background"] = i8(s[11])
			p = self.fp.read(3 << bits)
			for i in range(0, len(p), 3):