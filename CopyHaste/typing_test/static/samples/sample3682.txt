try:
except ImportError:
	raise plugin.DependencyError(issued_by='memusage', missing='ext lib `guppy`', silent=True)
log = logging.getLogger('mem_usage')
heapy = None
@event('manager.execute.started')
def on_exec_started(manager, options):
	if not options.mem_usage:
		return
	global heapy
	heapy = hpy()
@event('manager.execute.completed')
def on_exec_stopped(manager, options):
	if not options.mem_usage:
		return
	global heapy
	console('Calculating memory usage:')
	console(heapy.heap())
	console('-' * 79)
	console(heapy.heap().get_rp(40))
	heapy = None
@event('options.register')
def register_parser_arguments():
	options.get_parser('execute').add_argument('--mem-usage', action='store_true', dest='mem_usage', default=False,
											   help=