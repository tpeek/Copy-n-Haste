LOGGER = utils.LOGGER
CONFIG = utils._load_config()
class Trip:
	HEADSIGN_SQL = 'SELECT trips.trip_headsign FROM trips WHERE trips.trip_id = ?'
	SHAPE_SQL =
	def __init__(self, trip_id, cursor):
		self.trip_id = trip_id
		self.positions = []
		self.cursor = cursor
		self._set_headsign()
		self._set_shape_data()
	def process_shape(self):
		if not self.missing_shape:
			self._filter_shape_points()
			self._calc_dist_between_pts()
	def add_position(self, pos):
		self.positions.append(pos)
	def _set_shape_data(self):
		self.cursor.execute(self.SHAPE_SQL, (self.trip_id,))
		pts = list(self.cursor)
		if not pts:
			self.missing_shape = True
		else:
			self.missing_shape = False
			self.shape_points = pts
			self.shape_id = pts[0][3]
	def _set_hea