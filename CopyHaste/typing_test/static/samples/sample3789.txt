addon = xbmcaddon.Addon(id="plugin.video.cntv-live")
addon_path = xbmc.translatePath(addon.getAddonInfo("path"))
def updateChannel(fHandle, channelID, channelName):
	try:
		print("Updating channel " + channelID)
		
		dateInChina = (datetime.datetime.utcnow() + datetime.timedelta(hours=8)).replace(hour=0, minute=0)
		localTZ = datetime.datetime.now() - datetime.datetime.utcnow()
		tzOffset = localTZ - datetime.timedelta(hours=8)
		request = urllib2.Request("http://tv.cntv.cn/index.php?action=epg-list&date=" + dateInChina.strftime("%Y-%m-%d") + "&channel=" + channelID)
		request.add_header("Referer", "http://tv.cntv.cn/epg")
		resp = urllib2.urlopen(request)
		data = resp.read().decode("utf-8")
		
		match = re.compile('<dd(?: class="cur1")?>(