urllib3.disable_warnings()
app = Flask(__name__)
es = Elasticsearch()
@app.route('/', methods=["GET", "POST"])
def homepage():  
  title = "Kadist"
  q = request.args.get('q')
  if q and len(q.strip()):
	
	q = q.strip()
	fuzziness = "0" if len(q) < 10 else "1"
	qry_aggs =  {
	  "worktype": {
		"terms": {
		  "field": "worktype",
		},
	  },
	  "collection": {
		"terms": {
		  "field": "collection",
		}
	  },
	  "decade": {
		"terms": {
		  "field": "decade",
		}
	  }
	  ,
	  "artist_name": {
		"terms": {
		  "field": "artist_name",
		}
	  }
	}
	qry_highlight = {
	  "pre_tags" : ["<em>"],
	  "post_tags" : ["</em>"],
	  "fields" : {
		  "description" : {},
		  "artist_description" : {},
		  "title" : {}
		}
	}
	more_like_this = {
	  "size": 50