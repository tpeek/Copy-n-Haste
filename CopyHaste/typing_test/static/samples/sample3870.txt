sys.path.append('..')
if '__main__' == __name__:
	desc_str =
	parser = argparse.ArgumentParser(formatter_class=argparse.RawTextHelpFormatter,description=desc_str)
	parser.add_argument('--node_id',type=int,metavar='NODE_ID',help='ID of the node')
	parser.add_argument('--last',type=int,metavar='last',help='the number of (latest) records to retrieve')
	args = parser.parse_args()
	last = args.last
	node_id = args.node_id
	if node_id is None:
		print 'ID of the node must be specified. Example: python db2csv.py --node_id 4'
		exit()
	capability = read_capability()
	dbtag = capability[node_id]['dbtag']
	
	print 'From sensor_data.db reading node_{:03d}...'.format(node_id)
	store = storage()
	if last is None:
		print 'Reading entire database... (to 