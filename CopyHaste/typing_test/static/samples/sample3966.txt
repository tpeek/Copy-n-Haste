testimage = Image.new('RGB',(2000,2000))
draw = ImageDraw.Draw(testimage)
squares={}
numstars = 0
largest = -100000000
smallest = 100000000
def is_nan2(num):
  return str(num) == "nan"
  
def setsize(color):
  global largest
  global smallest
  intensity = ((color[0]-192)+(color[1]-192)+(color[2]-192))/3
  if color[2]>color[0] and color[2]>color[1]:
	intensity*=2.0
  if color[0]>color[1] and color[0]>color[2]:
	intensity/=1.2
  if random.random() > .9:
	if color[0] > color[2] and color[0] > color[1]:
	  intensity *= 3.0
	if color[2] > color[0] and color[2] > color[1]:
	  intensity *= 2.0 
  size = .01 + intensity/3200.0 + random.random()*.01
  if size < smallest:
	smallest = size
  if size > largest:
	largest = size
  return size
  
def gen