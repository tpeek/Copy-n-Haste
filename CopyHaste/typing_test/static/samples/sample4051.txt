"Implement Idle Shell history mechanism with History class"
class History:
	def __init__(self, text):
		self.text = text
		self.history = []
		self.prefix = None
		self.pointer = None
		self.cyclic = idleConf.GetOption("main", "History", "cyclic", 1, "bool")
		text.bind("<<history-previous>>", self.history_prev)
		text.bind("<<history-next>>", self.history_next)
	def history_next(self, event):
		"Fetch later statement; start with ealiest if cyclic."
		self.fetch(reverse=False)
		return "break"
	def history_prev(self, event):
		"Fetch earlier statement; start with most recent."
		self.fetch(reverse=True)
		return "break"
	def fetch(self, reverse):
		nhist = len(self.history)
		pointer = self.pointer
		prefix = self.prefix
		if pointer is not