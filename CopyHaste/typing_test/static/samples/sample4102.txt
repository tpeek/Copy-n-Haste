User = get_user_model()
class UserEditForm(forms.ModelForm):
	class Meta:
		model = User
		fields = ("username", "email", "location",
				  "timezone", "is_administrator", "is_moderator", "is_active",
				  "es_destacado")
class CategoryForm(forms.ModelForm):
	class Meta:
		model = Category
		fields = ("parent", "title", "description", "is_closed", "is_removed")
	def __init__(self, *args, **kwargs):
		super(CategoryForm, self).__init__(*args, **kwargs)
		queryset = Category.objects.for_parent()
		if self.instance.pk:
			queryset = queryset.exclude(pk=self.instance.pk)
		self.fields['parent'] = forms.ModelChoiceField(queryset=queryset, required=False)
	def clean_parent(self):
		parent = self.cleaned_data["parent"]
		if self.instance.pk:
			h