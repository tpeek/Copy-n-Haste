class FlagForm(forms.ModelForm):
	class Meta:
		model = Flag
		fields = ['reason', 'body']
	def __init__(self, user=None, comment=None, *args, **kwargs):
		super(FlagForm, self).__init__(*args, **kwargs)
		self.user = user
		self.comment = comment
	def clean(self):
		cleaned_data = super(FlagForm, self).clean()
		flag = Flag.objects.filter(user=self.user,
								   comment=self.comment)
		if flag.exists():
			raise forms.ValidationError(_("This flag already exists"))
		return cleaned_data
	def save(self, commit=True):
		if not self.instance.pk:
			self.instance.user = self.user
			self.instance.comment = self.comment
			try:
				CommentFlag.objects.create(comment=self.comment)
			except IntegrityError:
				CommentFlag.objects.filter(commen