class BaseSearchForm(SearchForm):
	def clean_q(self):
		q = self.cleaned_data['q']
		if len(q) < settings.ST_SEARCH_QUERY_MIN_LEN:
			raise forms.ValidationError(_("Your search must contain at least %(length)s characters.")
										% {'length': settings.ST_SEARCH_QUERY_MIN_LEN, })
		return q
class BasicSearchForm(BaseSearchForm):
	def search(self):
		sqs = super(BasicSearchForm, self).search()
		if isinstance(sqs, EmptySearchQuerySet):
			return sqs
		topics = sqs.models(Topic)
		return topics.filter(is_removed=False, is_category_removed=False, is_subcategory_removed=False)
class AdvancedSearchForm(BaseSearchForm):
	category = forms.ModelMultipleChoiceField(queryset=Category.objects.for_public(),
											  required=False,
											  