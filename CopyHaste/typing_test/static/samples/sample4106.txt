class TopicForm(forms.ModelForm):
	class Meta:
		model = Topic
		fields = ('title', 'category')
	def __init__(self, user, *args, **kwargs):
		super(TopicForm, self).__init__(*args, **kwargs)
		self.user = user
		self.fields['category'] = NestedModelChoiceField(queryset=Category.objects.for_public_open(),
														 related_name='category_set',
														 parent_field='parent_id',
														 label_field='title',
														 label=_("Category"),
														 empty_label=_(" Elije una categoria"))
		self.fields['title'].widget.attrs['placeholder'] = _(" Titulo")
		if self.instance.pk and not user.is_moderator:
			del self.fields['category']
	def clean_category(self):
		category = self.cleaned_data['category']
		if category.is_