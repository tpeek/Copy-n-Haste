_DEFAULT_LOCALE = 'en'
_TRANSLATE_REDIRECT = False
_LOCALE = None
_TRANSLATES = {}
_current_lang = None
_LANGUAGES_FOLDER = 'languages'
_TRANS_FILE = 'translate'
def config_loaded(config):
	global _LOCALE, _TRANSLATES
	site_meta = config.get("SITE", {}).get("meta", {})
	_LOCALE = site_meta.get("locale", _DEFAULT_LOCALE)
	_TRANSLATES = site_meta.get("translates")
	if _TRANSLATES:
		del config["SITE"]["meta"]["translates"]
	return
def request_url(request, redirect_to):
	if _TRANSLATES:
		global _current_lang
		_current_lang = request.accept_languages.best_match(_TRANSLATES.keys())
	return
def before_render(var, template):
	trans_list = []
	
	if _TRANSLATES:
		translates = _TRANSLATES
		if isinstance(translates, list):
			for trans in translat