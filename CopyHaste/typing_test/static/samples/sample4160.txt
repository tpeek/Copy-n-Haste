def load_environment(global_conf, app_conf):
	config = PylonsConfig()
	root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
	paths = dict(root=root,
				 controllers=os.path.join(root, 'controllers'),
				 static_files=os.path.join(root, 'public'),
				 templates=[os.path.join(root, 'templates')])
	config.init_app(global_conf, app_conf, package='abstrackr', paths=paths)
	config['routes.map'] = make_map(config)
	config['pylons.app_globals'] = app_globals.Globals(config)
	config['pylons.h'] = abstrackr.lib.helpers
	pylons.cache._push_object(config['pylons.app_globals'].cache)
	config['pylons.app_globals'].mako_lookup = TemplateLookup(
		directories=paths['templates'],
		error_handler=handle_mako_error,
		module_directory=os.path