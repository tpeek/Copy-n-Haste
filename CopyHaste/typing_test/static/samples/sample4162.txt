log = logging.getLogger(__name__)
class AccountController(BaseController):
	def login(self):
		identity = request.environ.get('repoze.who.identity')
		came_
					 url(controller='account', action='welcome')
		if identity:
			session['flash'] = 'Login successful.'
			session.save()
			redirect(url(came_
		else:
			c.came_
			c.login_counter = request.environ['repoze.who.logins'] + 1
			return render('/accounts/login.mako')
	def email_test(self):
		msg = Message('byron.wallace@gmail.com', 'byron.wallace@gmail.com', 'Subject')
		msg.plain = "Foo Bar"
		try:
			msg.send()
		except Exception, err:
			print err
	def recover_password(self):
		c.pwd_msg = ""
		return render('/accounts/recover.mako')
	def reset_password(self):
		user_email = request