SSLError = OpenSSL.SSL.WantReadError
ssl_version = ''
class SSLConnection(object):
	def __init__(self, context, sock):
		self._context = context
		self._sock = sock
		self._connection = OpenSSL.SSL.Connection(context, sock)
		self._makefile_refs = 0
	def __getattr__(self, attr):
		if attr not in ('_context', '_sock', '_connection', '_makefile_refs'):
			return getattr(self._connection, attr)
	def __iowait(self, io_func, *args, **kwargs):
		timeout = self._sock.gettimeout() or 0.1
		fd = self._sock.fileno()
		time_start = time.time()
		while True:
			try:
				return io_func(*args, **kwargs)
			except (OpenSSL.SSL.WantReadError, OpenSSL.SSL.WantX509LookupError):
				sys.exc_clear()
				_, _, errors = select.select([fd], [], [fd], timeout)
			