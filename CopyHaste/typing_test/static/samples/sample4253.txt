sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
if len(sys.argv) > 1:
	METHOD = 'LIST'
	LIST = open(sys.argv[1]).read().decode('utf8').strip()
else:
	METHOD = 'EURISTIC'
for test in get_testcases():
	if METHOD == 'EURISTIC':
		try:
			webpage = compat_urllib_request.urlopen(test['url'], timeout=10).read()
		except Exception:
			print('\nFail: {0}'.format(test['name']))
			continue
		webpage = webpage.decode('utf8', 'replace')
		RESULT = 'porn' in webpage.lower()
	elif METHOD == 'LIST':
		domain = compat_urllib_parse_urlparse(test['url']).netloc
		if not domain:
			print('\nFail: {0}'.format(test['name']))
			continue
		domain = '.'.join(domain.split('.')[-2:])
		RESULT = ('.' + domain + '\n' in LIST or '\n' +