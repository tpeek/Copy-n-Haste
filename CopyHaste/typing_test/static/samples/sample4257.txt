atom_template = textwrap.dedent()
entry_template = textwrap.dedent()
now = datetime.datetime.now()
now_iso = now.isoformat() + 'Z'
atom_template = atom_template.replace('@TIMESTAMP@', now_iso)
versions_info = json.load(open('update/versions.json'))
versions = list(versions_info['versions'].keys())
versions.sort()
entries = []
for v in versions:
	fields = v.split('.')
	year, month, day = map(int, fields[:3])
	faked = 0
	patchlevel = 0
	while True:
		try:
			datetime.date(year, month, day)
		except ValueError:
			day -= 1
			faked += 1
			assert day > 0
			continue
		break
	if len(fields) >= 4:
		try:
			patchlevel = int(fields[3])
		except ValueError:
			patchlevel = 1
	timestamp = '%04d-%02d-%02dT00:%02d:%02dZ' % (year, month, day, faked, p