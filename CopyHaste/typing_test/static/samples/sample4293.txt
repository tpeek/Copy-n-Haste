__license__   = 'GPL v3'
__copyright__ = '2008, Kovid Goyal <kovid at kovidgoyal.net>'
del init_calibre
sys.path.append(os.path.abspath('../../../'))
def substitute(app, doctree):
	pass
include_pat = re.compile(r'^.. include:: (\S+.rst)', re.M)
def source_read_handler(app, docname, source):
	src = source[0]
	src = src.replace(' generated/|lang|', ' generated/' + app.config.language).replace('|lang|', 'en')
	for m in reversed(tuple(include_pat.finditer(src))):
		ss = [open(m.group(1)).read().decode('utf-8')]
		source_read_handler(app, m.group(1).partition('.')[0], ss)
		src = src[:m.start()] + ss[0] + src[m.end():]
	source[0] = src
CLI_INDEX=
CLI_PREAMBLE=
def generate_calibredb_help(preamble, app):
	preamble = preamble[:preamble.find('\n\n\