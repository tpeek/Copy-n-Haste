__license__   = 'GPL v3'
__copyright__ = '2009, Kovid Goyal <kovid@kovidgoyal.net>'
__docformat__ = 'restructuredtext en'
class EPUBHelpBuilder(EpubBuilder):
	name = 'myepub'
	def build_epub(self, outdir, outname):
		EpubBuilder.build_epub(self, outdir, outname)
		container = get_container(os.path.join(outdir, outname))
		self.fix_epub(container)
		container.commit()
	def fix_epub(self, container):
		' Fix all the brokenness that sphinx\'s epub builder creates '
		for name, mt in container.mime_map.iteritems():
			if mt in OEB_DOCS:
				self.workaround_ade_quirks(container, name)
				pretty_html_tree(container, container.parsed(name))
				container.dirty(name)
		self.fix_opf(container)
	def workaround_ade_quirks(self, container, name):
		ro