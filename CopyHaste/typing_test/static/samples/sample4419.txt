def get_project(id_):
	if len(id_) == 40:
		project = Project.query.get(id_)
	else:
		project = Project.query.filter_by(slug=id_).first()
	if not project:
		err_msg = "Project '{0}' not found".format(id_)
		print(err_msg)
		raise Exception(err_msg)
	return project
app = create_app()
app_context = app.app_context()
app_context.push()
parser = argparse.ArgumentParser(description='Manage reports')
subparsers = parser.add_subparsers(dest='command')
parser_send = subparsers.add_parser('send', help='send report')
parser_send.add_argument(
	'-d', '--days', dest='days', type=int, help='period length (days)',
	default=7)
parser_send.add_argument(
	'-p', '--project', dest='projects', metavar='PROJECT',
	help='project ID or slug (default: all projects