
class CallbackError(Exception):
	pass
class Callbacks(object):
	def __init__(self):
		self.cb = {}
	def clear_callback(self, name):
		self.cb[name] = []
	def enable_callback(self, name):
		if not self.has_callback(name):
			self.clear_callback(name)
	def has_callback(self, name):
		return name in self.cb
	def delete_callback(self, name):
		del self.cb[name]
	def add_callback(self, name, fn, *args, **kwdargs):
		try:
			tup = (fn, args, kwdargs)
			if not tup in self.cb[name]:
				self.cb[name].append(tup)
		except KeyError:
			raise CallbackError("No callback category of '%s'" % (
				name))
	def set_callback(self, name, fn, *args, **kwdargs):
		if not self.has_callback(name):
			self.enable_callback(name)
		return self.add_callback(name, 