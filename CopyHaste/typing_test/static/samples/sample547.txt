
class SlippageTestCase(TestCase):
	def test_volume_share_slippage(self):
		event = Event(
			{'volume': 200,
			 'type': 4,
			 'price': 3.0,
			 'datetime': datetime.datetime(
				 2006, 1, 5, 14, 31, tzinfo=pytz.utc),
			 'high': 3.15,
			 'low': 2.85,
			 'sid': 133,
			 'source_id': 'test_source',
			 'close': 3.0,
			 'dt':
			 datetime.datetime(2006, 1, 5, 14, 31, tzinfo=pytz.utc),
			 'open': 3.0}
		)
		slippage_model = VolumeShareSlippage()
		open_orders = [
			Order(dt=datetime.datetime(2006, 1, 5, 14, 30, tzinfo=pytz.utc),
				  amount=100,
				  filled=0,
				  sid=133)
		]
		orders_txns = list(slippage_model.simulate(
			event,
			open_orders
		))
		self.assertEquals(len(orders_txns), 1)
		_, txn = orders_txns[0]
		expected_txn