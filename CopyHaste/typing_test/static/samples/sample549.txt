
BUCKET_NAME = 'zipline-test-data'
def main():
	with open(answer_key.ANSWER_KEY_PATH, 'r') as f:
		md5 = hashlib.md5()
		while True:
			buf = f.read(1024)
			if not buf:
				break
			md5.update(buf)
	local_hash = md5.hexdigest()
	s3_conn = boto.connect_s3()
	bucket = s3_conn.get_bucket(BUCKET_NAME)
	key = boto.s3.key.Key(bucket)
	key.key = "risk/{local_hash}/risk-answer-key.xlsx".format(
		local_hash=local_hash)
	key.set_contents_
	key.set_acl('public-read')
	download_link = "http://s3.amazonaws.com/{bucket_name}/{key}".format(
		bucket_name=BUCKET_NAME,
		key=key.key)
	print("Uploaded to key: {key}".format(key=key.key))
	print("Download link: {download_link}".format(download_link=download_link))
	with open(answer_key.ANSWER_KEY_CHECKSUMS_P