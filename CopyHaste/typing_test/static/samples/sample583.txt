
try:
except ImportError:
	html5lib = None
try:
except ImportError:
	try:
	except ImportError:
		ET = None
class HTMLLog(HtmlResource):
	implements(IHTMLLog)
	def __init__(self, original):
		Resource.__init__(self)
		self.original = original
		parser = html5lib.HTMLParser()
		c = parser.parse(self.original.html)
		if c.childNodes[0].type == 3:
			c = c.childNodes[1]
		if c.attributes.get('xmlns'):
			del c.attributes['xmlns']
		self.x = ET.
	def getTitle(self, request):
		status = self.getStatus(request)
		p = status.getProjectName()
		title = self.x.find('head/title')
		if title is not None:
			return '%s: %s' % (p, title.text)
		return p
	def body(self, request):
		return '\n'.join([ET.tostring(x) for x in self.x.find('body').getchildren(