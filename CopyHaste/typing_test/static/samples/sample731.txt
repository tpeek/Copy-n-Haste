
class OnePieceTieba:
	def __init__(self, url):
		self.url = url
	def get_html_data(self):
		response = urllib2.urlopen(self.url)
		self.content = response.read()
		content_code = chardet.detect(self.content)
		if not content_code['encoding'] == 'utf-8':
			self.content.decode('utf-8')
	def extract_html_data(self):
		pattern = re.compile(
			ur'<a href="/p/\d+" title="[\u4e00-\u9fff\ufb00-\ufffd\s\S]+?" target="_blank" class="j_th_tit">[\u4e00-\u9fff\ufb00-\ufffd\s\S]+?</a>')
		result = pattern.findall(self.content)
		pattern = re.compile(
			ur'<a href="(/p/\d+)" title="[\u4e00-\u9fff\ufb00-\ufffd\s\S]+?" target="_blank" class="j_th_tit">([\u4e00-\u9fff\ufb00-\ufffd\s\S]+?)</a>')
		for i in range(len(result)):
			tmpre = pattern.search(res