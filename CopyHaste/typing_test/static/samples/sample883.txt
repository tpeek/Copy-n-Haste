
ENDINGS = [
	".rpy",
	".rpym",
	".py",
	".pyx",
	".pxd",
	]
WHITELIST =.split()
LICENSE = "Permission is hereby granted"
def process_file(fn):
	for i in ENDINGS:
		if fn.endswith(i):
			break
	else:
		return
	for i in WHITELIST:
		if fn.startswith(i):
			return
	has_copyright = False
	has_license = False
	first = True
	with open(fn, "rb") as f:
		for l in f:
			if fn.endswith(".rpy") or fn.endswith(".rpym"):
				if first:
					if codecs.BOM_UTF8 not in l:
						print("Missing BOM", fn)
					first = False
				else:
					if codecs.BOM_UTF8 in l:
						print("Extra BOM", fn)
				first = False
			m = re.search(
				r"Copyright (\d{4})-2015 Tom Rothamel",
				l)
			if m:
				has_copyright = True
			if LICENSE in l:
				has_license = True
			if 