
class _Select(object):
	def __init__(self):
		self.read_fds = set()
		self.write_fds = set()
		self.error_fds = set()
		self.fd_sets = (self.read_fds, self.write_fds, self.error_fds)
	def close(self):
		pass
	def register(self, fd, events):
		if fd in self.read_fds or fd in self.write_fds or fd in self.error_fds:
			raise IOError("fd %s already registered" % fd)
		if events & IOLoop.READ:
			self.read_fds.add(fd)
		if events & IOLoop.WRITE:
			self.write_fds.add(fd)
		if events & IOLoop.ERROR:
			self.error_fds.add(fd)
	def modify(self, fd, events):
		self.unregister(fd)
		self.register(fd, events)
	def unregister(self, fd):
		self.read_fds.discard(fd)
		self.write_fds.discard(fd)
		self.error_fds.discard(fd)
	def poll(self, timeout):
		re